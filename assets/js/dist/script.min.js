"use strict";$(document).ready(function(){function t(){$("#modal-title").text("Add Supplier"),$("#supplier-form")[0].reset(),$("#supplier_id").val(""),$("#supplier-modal").css("display","flex")}function n(){$.ajax({url:"api/read.php",type:"GET",dataType:"json",success:function(t){$("#system-status").text("Online").css("color","var(--success-color)");var a="";0<t.length?($("#total-suppliers").text(t.length),$.each(t,function(t,e){a+="<tr>\n                            <td>".concat(e.id,"</td>\n                            <td>").concat(e.company_name,"</td>\n                            <td>").concat(e.contact_person,"</td>\n                            <td>").concat(e.email,"</td>\n                            <td>").concat(e.phone,'</td>\n                            <td>\n                                <button class="btn-sm btn-edit" data-id="').concat(e.id,'"><i class="fa-solid fa-pen"></i></button>\n                                <button class="btn-sm btn-delete" data-id="').concat(e.id,'"><i class="fa-solid fa-trash"></i></button>\n                            </td>\n                        </tr>')})):($("#total-suppliers").text("0"),a='<tr><td colspan="6" style="text-align:center">No suppliers found.</td></tr>'),$("#suppliers-table tbody").html(a)},error:function(){$("#system-status").text("Offline").css("color","var(--danger-color)"),$("#suppliers-table tbody").html('<tr><td colspan="6" style="text-align:center; color:red;">Error loading data. Check database connection.</td></tr>')}})}function o(){$.ajax({url:"api/read.php",type:"GET",dataType:"json",success:function(t){var a="";0<t.length?$.each(t,function(t,e){a+="<tr>\n                            <td>".concat(e.id,"</td>\n                            <td>").concat(e.company_name,"</td>\n                            <td>").concat(e.contact_person,"</td>\n                            <td>").concat(e.email,"</td>\n                            <td>").concat(e.phone,"</td>\n                            <td>").concat(e.address,'</td>\n                            <td>\n                                <button class="btn-sm btn-edit" data-id="').concat(e.id,'"><i class="fa-solid fa-pen"></i></button>\n                                <button class="btn-sm btn-delete" data-id="').concat(e.id,'"><i class="fa-solid fa-trash"></i></button>\n                            </td>\n                        </tr>')}):a='<tr><td colspan="7" style="text-align:center">No suppliers found.</td></tr>',$("#suppliers-table-tab tbody").html(a)},error:function(){$("#suppliers-table-tab tbody").html('<tr><td colspan="7" style="text-align:center; color:red;">Error loading data. Check database connection.</td></tr>')}})}function i(t,e){var a=$("#alert-message");a.removeClass("alert-success alert-error").addClass("success"===t?"alert-success":"alert-error"),a.text(e).fadeIn(),setTimeout(function(){a.fadeOut()},3e3)}n(),o(),$(".nav-link[data-tab]").click(function(t){t.preventDefault();var e=$(this).data("tab");$(".nav-link").removeClass("active"),$(this).addClass("active"),$(".tab-content").removeClass("active"),$("#tab-"+e).addClass("active");$("#page-title").text({dashboard:"Dashboard",suppliers:"Supplier Management",settings:"System Settings"}[e]||"Dashboard"),"suppliers"===e&&o(),"settings"===e&&$.ajax({url:"api/read.php",type:"GET",dataType:"json",success:function(t){$("#db-status-settings").text("Connected").removeClass("badge-danger").addClass("badge-success"),$("#total-records-settings").text(t.length)},error:function(){$("#db-status-settings").text("Disconnected").removeClass("badge-success").addClass("badge-danger"),$("#total-records-settings").text("N/A")}})}),$("#btn-add-supplier").click(function(){t()}),$("#btn-add-supplier-tab").click(function(){t()}),$(".close-modal, .close-modal-btn").click(function(){$("#supplier-modal").hide()}),$(window).click(function(t){"supplier-modal"==t.target.id&&$("#supplier-modal").hide()}),$("#supplier-form").submit(function(t){t.preventDefault();var e=$("#supplier_id").val(),a=e?"api/update.php":"api/create.php",s={id:e,company_name:$("#company_name").val(),contact_person:$("#contact_person").val(),email:$("#email").val(),phone:$("#phone").val(),address:$("#address").val()};$.ajax({url:a,type:"POST",data:JSON.stringify(s),contentType:"application/json",success:function(t){$("#supplier-modal").hide(),$("#supplier-form")[0].reset(),i("success",t.message),n(),o()},error:function(t){i("error",t.responseJSON?t.responseJSON.message:"An error occurred")}})}),$(document).on("click",".btn-edit",function(){var t=$(this).data("id");$.ajax({url:"api/get_single.php?id="+t,type:"GET",dataType:"json",success:function(t){$("#supplier_id").val(t.id),$("#company_name").val(t.company_name),$("#contact_person").val(t.contact_person),$("#email").val(t.email),$("#phone").val(t.phone),$("#address").val(t.address),$("#modal-title").text("Edit Supplier"),$("#supplier-modal").css("display","flex")},error:function(){i("error","Could not fetch supplier details.")}})}),$(document).on("click",".btn-delete",function(){if(confirm("Are you sure you want to delete this supplier?")){var t=$(this).data("id");$.ajax({url:"api/delete.php",type:"POST",data:JSON.stringify({id:t}),contentType:"application/json",success:function(t){i("success",t.message),n(),o()},error:function(t){i("error",t.responseJSON?t.responseJSON.message:"Delete failed")}})}}),$("#search-input").on("keyup",function(){var t=$(this).val().toLowerCase();$("#suppliers-table tbody tr").filter(function(){$(this).toggle(-1<$(this).text().toLowerCase().indexOf(t))})}),$("#search-input-suppliers").on("keyup",function(){var t=$(this).val().toLowerCase();$("#suppliers-table-tab tbody tr").filter(function(){$(this).toggle(-1<$(this).text().toLowerCase().indexOf(t))})})});
//# sourceMappingURL=script.min.js.map
