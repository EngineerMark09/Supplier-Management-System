{"version":3,"sources":["script.js"],"names":["$","document","ready","openSupplierModal","text","rows","reset","val","css","loadSuppliers","ajax","url","type","dataType","success","html","data","length","each","i","item","loadSuppliersTab","concat","id","company_name","contact_person","email","phone","error","address","showAlert","message","alertBox","removeClass","addClass","fadeIn","setTimeout","fadeOut","click","e","preventDefault","tab","this","titles","dashboard","suppliers","settings","hide","window","event","target","formData","submit","JSON","contentType","response","msg","xhr","stringify","responseJSON","on","confirm","toLowerCase","value","filter","toggle","indexOf"],"mappings":"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","file":"script.min.js","sourcesContent":["$(document).ready(function() {\r\n    \r\n    // Load suppliers on page load\r\n    loadSuppliers();\r\n    loadSuppliersTab();\r\n\r\n    // Tab Navigation\r\n    $('.nav-link[data-tab]').click(function(e) {\r\n        e.preventDefault();\r\n        var tab = $(this).data('tab');\r\n        \r\n        // Update active state\r\n        $('.nav-link').removeClass('active');\r\n        $(this).addClass('active');\r\n        \r\n        // Show corresponding tab content\r\n        $('.tab-content').removeClass('active');\r\n        $('#tab-' + tab).addClass('active');\r\n        \r\n        // Update page title\r\n        var titles = {\r\n            'dashboard': 'Dashboard',\r\n            'suppliers': 'Supplier Management',\r\n            'settings': 'System Settings'\r\n        };\r\n        $('#page-title').text(titles[tab] || 'Dashboard');\r\n        \r\n        // Reload data if switching to suppliers tab\r\n        if(tab === 'suppliers') {\r\n            loadSuppliersTab();\r\n        }\r\n        \r\n        // Update settings info if switching to settings\r\n        if(tab === 'settings') {\r\n            updateSettingsInfo();\r\n        }\r\n    });\r\n\r\n    // Open Modal for Adding (Dashboard)\r\n    $('#btn-add-supplier').click(function() {\r\n        openSupplierModal();\r\n    });\r\n\r\n    // Open Modal for Adding (Suppliers Tab)\r\n    $('#btn-add-supplier-tab').click(function() {\r\n        openSupplierModal();\r\n    });\r\n\r\n    // Close Modal\r\n    $('.close-modal, .close-modal-btn').click(function() {\r\n        $('#supplier-modal').hide();\r\n    });\r\n\r\n    // Close modal when clicking outside\r\n    $(window).click(function(event) {\r\n        if (event.target.id == 'supplier-modal') {\r\n            $('#supplier-modal').hide();\r\n        }\r\n    });\r\n\r\n    // Handle Form Submission (Create & Update)\r\n    $('#supplier-form').submit(function(e) {\r\n        e.preventDefault();\r\n        \r\n        var id = $('#supplier_id').val();\r\n        var url = id ? 'api/update.php' : 'api/create.php';\r\n        var formData = {\r\n            id: id,\r\n            company_name: $('#company_name').val(),\r\n            contact_person: $('#contact_person').val(),\r\n            email: $('#email').val(),\r\n            phone: $('#phone').val(),\r\n            address: $('#address').val()\r\n        };\r\n\r\n        $.ajax({\r\n            url: url,\r\n            type: 'POST',\r\n            data: JSON.stringify(formData),\r\n            contentType: 'application/json',\r\n            success: function(response) {\r\n                $('#supplier-modal').hide();\r\n                $('#supplier-form')[0].reset();\r\n                showAlert('success', response.message);\r\n                loadSuppliers();\r\n                loadSuppliersTab();\r\n            },\r\n            error: function(xhr, status, error) {\r\n                var msg = xhr.responseJSON ? xhr.responseJSON.message : 'An error occurred';\r\n                showAlert('error', msg);\r\n            }\r\n        });\r\n    });\r\n\r\n    // Handle Edit Button\r\n    $(document).on('click', '.btn-edit', function() {\r\n        var id = $(this).data('id');\r\n        \r\n        $.ajax({\r\n            url: 'api/get_single.php?id=' + id,\r\n            type: 'GET',\r\n            dataType: 'json',\r\n            success: function(data) {\r\n                $('#supplier_id').val(data.id);\r\n                $('#company_name').val(data.company_name);\r\n                $('#contact_person').val(data.contact_person);\r\n                $('#email').val(data.email);\r\n                $('#phone').val(data.phone);\r\n                $('#address').val(data.address);\r\n                \r\n                $('#modal-title').text('Edit Supplier');\r\n                $('#supplier-modal').css('display', 'flex');\r\n            },\r\n            error: function() {\r\n                showAlert('error', 'Could not fetch supplier details.');\r\n            }\r\n        });\r\n    });\r\n\r\n    // Handle Delete Button\r\n    $(document).on('click', '.btn-delete', function() {\r\n        if(confirm('Are you sure you want to delete this supplier?')) {\r\n            var id = $(this).data('id');\r\n            \r\n            $.ajax({\r\n                url: 'api/delete.php',\r\n                type: 'POST',\r\n                data: JSON.stringify({ id: id }),\r\n                contentType: 'application/json',\r\n                success: function(response) {\r\n                    showAlert('success', response.message);\r\n                    loadSuppliers();\r\n                    loadSuppliersTab();\r\n                },\r\n                error: function(xhr) {\r\n                    var msg = xhr.responseJSON ? xhr.responseJSON.message : 'Delete failed';\r\n                    showAlert('error', msg);\r\n                }\r\n            });\r\n        }\r\n    });\r\n\r\n    // Search Functionality\r\n    $('#search-input').on('keyup', function() {\r\n        var value = $(this).val().toLowerCase();\r\n        $(\"#suppliers-table tbody tr\").filter(function() {\r\n            $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)\r\n        });\r\n    });\r\n\r\n    // Search Functionality (Suppliers Tab)\r\n    $('#search-input-suppliers').on('keyup', function() {\r\n        var value = $(this).val().toLowerCase();\r\n        $(\"#suppliers-table-tab tbody tr\").filter(function() {\r\n            $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)\r\n        });\r\n    });\r\n\r\n    // Functions\r\n    function openSupplierModal() {\r\n        $('#modal-title').text('Add Supplier');\r\n        $('#supplier-form')[0].reset();\r\n        $('#supplier_id').val('');\r\n        $('#supplier-modal').css('display', 'flex');\r\n    }\r\n\r\n    function loadSuppliers() {\r\n        $.ajax({\r\n            url: 'api/read.php',\r\n            type: 'GET',\r\n            dataType: 'json',\r\n            success: function(data) {\r\n                $('#system-status').text('Online').css('color', 'var(--success-color)');\r\n                var rows = '';\r\n                if(data.length > 0) {\r\n                    $('#total-suppliers').text(data.length);\r\n                    $.each(data, function(i, item) {\r\n                        rows += `<tr>\r\n                            <td>${item.id}</td>\r\n                            <td>${item.company_name}</td>\r\n                            <td>${item.contact_person}</td>\r\n                            <td>${item.email}</td>\r\n                            <td>${item.phone}</td>\r\n                            <td>\r\n                                <button class=\"btn-sm btn-edit\" data-id=\"${item.id}\"><i class=\"fa-solid fa-pen\"></i></button>\r\n                                <button class=\"btn-sm btn-delete\" data-id=\"${item.id}\"><i class=\"fa-solid fa-trash\"></i></button>\r\n                            </td>\r\n                        </tr>`;\r\n                    });\r\n                } else {\r\n                    $('#total-suppliers').text('0');\r\n                    rows = '<tr><td colspan=\"6\" style=\"text-align:center\">No suppliers found.</td></tr>';\r\n                }\r\n                $('#suppliers-table tbody').html(rows);\r\n            },\r\n            error: function() {\r\n                $('#system-status').text('Offline').css('color', 'var(--danger-color)');\r\n                $('#suppliers-table tbody').html('<tr><td colspan=\"6\" style=\"text-align:center; color:red;\">Error loading data. Check database connection.</td></tr>');\r\n            }\r\n        });\r\n    }\r\n\r\n    function loadSuppliersTab() {\r\n        $.ajax({\r\n            url: 'api/read.php',\r\n            type: 'GET',\r\n            dataType: 'json',\r\n            success: function(data) {\r\n                var rows = '';\r\n                if(data.length > 0) {\r\n                    $.each(data, function(i, item) {\r\n                        rows += `<tr>\r\n                            <td>${item.id}</td>\r\n                            <td>${item.company_name}</td>\r\n                            <td>${item.contact_person}</td>\r\n                            <td>${item.email}</td>\r\n                            <td>${item.phone}</td>\r\n                            <td>${item.address}</td>\r\n                            <td>\r\n                                <button class=\"btn-sm btn-edit\" data-id=\"${item.id}\"><i class=\"fa-solid fa-pen\"></i></button>\r\n                                <button class=\"btn-sm btn-delete\" data-id=\"${item.id}\"><i class=\"fa-solid fa-trash\"></i></button>\r\n                            </td>\r\n                        </tr>`;\r\n                    });\r\n                } else {\r\n                    rows = '<tr><td colspan=\"7\" style=\"text-align:center\">No suppliers found.</td></tr>';\r\n                }\r\n                $('#suppliers-table-tab tbody').html(rows);\r\n            },\r\n            error: function() {\r\n                $('#suppliers-table-tab tbody').html('<tr><td colspan=\"7\" style=\"text-align:center; color:red;\">Error loading data. Check database connection.</td></tr>');\r\n            }\r\n        });\r\n    }\r\n\r\n    function updateSettingsInfo() {\r\n        $.ajax({\r\n            url: 'api/read.php',\r\n            type: 'GET',\r\n            dataType: 'json',\r\n            success: function(data) {\r\n                $('#db-status-settings').text('Connected').removeClass('badge-danger').addClass('badge-success');\r\n                $('#total-records-settings').text(data.length);\r\n            },\r\n            error: function() {\r\n                $('#db-status-settings').text('Disconnected').removeClass('badge-success').addClass('badge-danger');\r\n                $('#total-records-settings').text('N/A');\r\n            }\r\n        });\r\n    }\r\n\r\n    function showAlert(type, message) {\r\n        var alertBox = $('#alert-message');\r\n        alertBox.removeClass('alert-success alert-error').addClass(type === 'success' ? 'alert-success' : 'alert-error');\r\n        alertBox.text(message).fadeIn();\r\n        setTimeout(function() {\r\n            alertBox.fadeOut();\r\n        }, 3000);\r\n    }\r\n});\r\n"]}