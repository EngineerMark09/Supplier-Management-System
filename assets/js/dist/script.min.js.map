{"version":3,"sources":["script.js"],"names":["$","document","ready","filterTable","tableId","matchesSearch","searchValue","matchesStatus","statusValue","toLowerCase","toggle","val","filter","statusCell","company","this","find","text","contact","email","phone","css","address","loadSuppliers","indexOf","activeCount","data","length","statusBadge","openSupplierModal","rows","reset","ajax","url","type","loadSuppliersTab","success","item","status","getStatusBadge","each","i","concat","id","company_name","contact_person","error","html","showAlert","alertBox","removeClass","dataType","message","setTimeout","fadeOut","addClass","fadeIn","badgeClass","click","e","preventDefault","tab","titles","dashboard","suppliers","settings","hide","window","event","target","submit","JSON","formData","contentType","response","msg","xhr","stringify","responseJSON","on","confirm"],"mappings":"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","file":"script.min.js","sourcesContent":["// Dashboard main script\r\n$(document).ready(function() {\r\n    \r\n    // Load suppliers on page load\r\n    loadSuppliers();\r\n    loadSuppliersTab();\r\n\r\n    // Tab Navigation\r\n    $('.nav-link[data-tab]').click(function(e) {\r\n        e.preventDefault();\r\n        var tab = $(this).data('tab');\r\n        \r\n        // Update active state\r\n        $('.nav-link').removeClass('active');\r\n        $(this).addClass('active');\r\n        \r\n        // Show corresponding tab content\r\n        $('.tab-content').removeClass('active');\r\n        $('#tab-' + tab).addClass('active');\r\n        \r\n        // Update page title\r\n        var titles = {\r\n            'dashboard': 'Dashboard',\r\n            'suppliers': 'Supplier Management',\r\n            'settings': 'System Settings'\r\n        };\r\n        $('#page-title').text(titles[tab] || 'Dashboard');\r\n        \r\n        // Reload data if switching to suppliers tab\r\n        if(tab === 'suppliers') {\r\n            loadSuppliersTab();\r\n        }\r\n        \r\n        // Update settings info if switching to settings\r\n        if(tab === 'settings') {\r\n            updateSettingsInfo();\r\n        }\r\n    });\r\n\r\n    // Open Modal for Adding (Dashboard)\r\n    $('#btn-add-supplier').click(function() {\r\n        openSupplierModal();\r\n    });\r\n\r\n    // Open Modal for Adding (Suppliers Tab)\r\n    $('#btn-add-supplier-tab').click(function() {\r\n        openSupplierModal();\r\n    });\r\n\r\n    // Close Modal\r\n    $('.close-modal, .close-modal-btn').click(function() {\r\n        $('#supplier-modal').hide();\r\n    });\r\n\r\n    // Close modal when clicking outside\r\n    $(window).click(function(event) {\r\n        if (event.target.id == 'supplier-modal') {\r\n            $('#supplier-modal').hide();\r\n        }\r\n    });\r\n\r\n    // Handle Form Submission (Create & Update)\r\n    $('#supplier-form').submit(function(e) {\r\n        e.preventDefault();\r\n        \r\n        // Check if editing or creating\r\n        var id = $('#supplier_id').val();\r\n        var url = id ? 'api/update.php' : 'api/create.php';\r\n        var formData = {\r\n            id: id,\r\n            company_name: $('#company_name').val(),\r\n            contact_person: $('#contact_person').val(),\r\n            email: $('#email').val(),\r\n            phone: $('#phone').val(),\r\n            address: $('#address').val(),\r\n            status: $('#status').val()\r\n        };\r\n\r\n        $.ajax({\r\n            url: url,\r\n            type: 'POST',\r\n            data: JSON.stringify(formData),\r\n            contentType: 'application/json',\r\n            success: function(response) {\r\n                $('#supplier-modal').hide();\r\n                $('#supplier-form')[0].reset();\r\n                showAlert('success', response.message);\r\n                loadSuppliers();\r\n                loadSuppliersTab();\r\n            },\r\n            error: function(xhr, status, error) {\r\n                var msg = xhr.responseJSON ? xhr.responseJSON.message : 'An error occurred';\r\n                showAlert('error', msg);\r\n            }\r\n        });\r\n    });\r\n\r\n    // Handle Edit Button\r\n    $(document).on('click', '.btn-edit', function() {\r\n        var id = $(this).data('id');\r\n        \r\n        $.ajax({\r\n            url: 'api/get_single.php?id=' + id,\r\n            type: 'GET',\r\n            dataType: 'json',\r\n            success: function(data) {\r\n                $('#supplier_id').val(data.id);\r\n                $('#company_name').val(data.company_name);\r\n                $('#contact_person').val(data.contact_person);\r\n                $('#email').val(data.email);\r\n                $('#phone').val(data.phone);\r\n                $('#address').val(data.address);\r\n                $('#status').val(data.status || 'Active');\r\n                \r\n                $('#modal-title').text('Edit Supplier');\r\n                $('#supplier-modal').css('display', 'flex');\r\n            },\r\n            error: function() {\r\n                showAlert('error', 'Could not fetch supplier details.');\r\n            }\r\n        });\r\n    });\r\n\r\n    // Handle Delete Button\r\n    $(document).on('click', '.btn-delete', function() {\r\n        if(confirm('Are you sure you want to delete this supplier?')) {\r\n            var id = $(this).data('id');\r\n            \r\n            $.ajax({\r\n                url: 'api/delete.php',\r\n                type: 'POST',\r\n                data: JSON.stringify({ id: id }),\r\n                contentType: 'application/json',\r\n                success: function(response) {\r\n                    showAlert('success', response.message);\r\n                    loadSuppliers();\r\n                    loadSuppliersTab();\r\n                },\r\n                error: function(xhr) {\r\n                    var msg = xhr.responseJSON ? xhr.responseJSON.message : 'Delete failed';\r\n                    showAlert('error', msg);\r\n                }\r\n            });\r\n        }\r\n    });\r\n\r\n    // Search Functionality\r\n    $('#search-input').on('keyup', function() {\r\n        filterTable('#suppliers-table');\r\n    });\r\n\r\n    // Search Functionality (Suppliers Tab)\r\n    $('#search-input-suppliers').on('keyup', function() {\r\n        filterTable('#suppliers-table-tab');\r\n    });\r\n\r\n    // Status Filter (Dashboard)\r\n    $('#status-filter').on('change', function() {\r\n        filterTable('#suppliers-table');\r\n    });\r\n\r\n    // Status Filter (Suppliers Tab)\r\n    $('#status-filter-suppliers').on('change', function() {\r\n        filterTable('#suppliers-table-tab');\r\n    });\r\n\r\n    // Functions\r\n    // Filter by search and status\r\n    function filterTable(tableId) {\r\n        var searchValue = tableId === '#suppliers-table' ? \r\n            $('#search-input').val().toLowerCase() : \r\n            $('#search-input-suppliers').val().toLowerCase();\r\n        var statusValue = tableId === '#suppliers-table' ? \r\n            $('#status-filter').val() : \r\n            $('#status-filter-suppliers').val();\r\n\r\n        $(tableId + \" tbody tr\").filter(function() {\r\n            // Get individual cell values for better search\r\n            var company = $(this).find('td:nth-child(2)').text().toLowerCase();\r\n            var contact = $(this).find('td:nth-child(3)').text().toLowerCase();\r\n            var email = $(this).find('td:nth-child(4)').text().toLowerCase();\r\n            var phone = $(this).find('td:nth-child(5)').text().toLowerCase();\r\n            \r\n            var statusCell, address = '';\r\n            if (tableId === '#suppliers-table-tab') {\r\n                address = $(this).find('td:nth-child(6)').text().toLowerCase();\r\n                statusCell = $(this).find('td:nth-child(7)').text();\r\n            } else {\r\n                statusCell = $(this).find('td:nth-child(6)').text();\r\n            }\r\n            \r\n            // Check if search matches any field\r\n            var matchesSearch = searchValue === '' || \r\n                company.indexOf(searchValue) > -1 ||\r\n                contact.indexOf(searchValue) > -1 ||\r\n                email.indexOf(searchValue) > -1 ||\r\n                phone.indexOf(searchValue) > -1 ||\r\n                address.indexOf(searchValue) > -1 ||\r\n                statusCell.toLowerCase().indexOf(searchValue) > -1;\r\n            \r\n            var matchesStatus = statusValue === '' || statusCell === statusValue;\r\n            $(this).toggle(matchesSearch && matchesStatus);\r\n        });\r\n    }\r\n\r\n    function openSupplierModal() {\r\n        $('#modal-title').text('Add Supplier');\r\n        $('#supplier-form')[0].reset();\r\n        $('#supplier_id').val('');\r\n        $('#status').val('Active'); // Set default status to Active\r\n        $('#supplier-modal').css('display', 'flex');\r\n    }\r\n\r\n    // Load dashboard data\r\n    function loadSuppliers() {\r\n        $.ajax({\r\n            url: 'api/read.php',\r\n            type: 'GET',\r\n            dataType: 'json',\r\n            success: function(data) {\r\n                var rows = '';\r\n                if(data.length > 0) {\r\n                    $('#total-suppliers').text(data.length);\r\n                    \r\n                    // Count active suppliers\r\n                    var activeCount = data.filter(function(item) {\r\n                        return (item.status || 'Active') === 'Active';\r\n                    }).length;\r\n                    $('#active-suppliers').text(activeCount);\r\n                    \r\n                    $.each(data, function(i, item) {\r\n                        var statusBadge = getStatusBadge(item.status || 'Active');\r\n                        rows += `<tr>\r\n                            <td>${item.id}</td>\r\n                            <td>${item.company_name}</td>\r\n                            <td>${item.contact_person}</td>\r\n                            <td>${item.email}</td>\r\n                            <td>${item.phone}</td>\r\n                            <td>${statusBadge}</td>\r\n                            <td>\r\n                                <button class=\"btn-sm btn-edit\" data-id=\"${item.id}\"><i class=\"fa-solid fa-pen\"></i></button>\r\n                                <button class=\"btn-sm btn-delete\" data-id=\"${item.id}\"><i class=\"fa-solid fa-trash\"></i></button>\r\n                            </td>\r\n                        </tr>`;\r\n                    });\r\n                } else {\r\n                    $('#total-suppliers').text('0');\r\n                    $('#active-suppliers').text('0');\r\n                    rows = '<tr><td colspan=\"7\" style=\"text-align:center\">No suppliers found.</td></tr>';\r\n                }\r\n                $('#suppliers-table tbody').html(rows);\r\n            },\r\n            error: function() {\r\n                $('#suppliers-table tbody').html('<tr><td colspan=\"7\" style=\"text-align:center; color:red;\">Error loading data. Check database connection.</td></tr>');\r\n            }\r\n        });\r\n    }\r\n\r\n    function loadSuppliersTab() {\r\n        $.ajax({\r\n            url: 'api/read.php',\r\n            type: 'GET',\r\n            dataType: 'json',\r\n            success: function(data) {\r\n                var rows = '';\r\n                if(data.length > 0) {\r\n                    $.each(data, function(i, item) {\r\n                        var statusBadge = getStatusBadge(item.status || 'Active');\r\n                        rows += `<tr>\r\n                            <td>${item.id}</td>\r\n                            <td>${item.company_name}</td>\r\n                            <td>${item.contact_person}</td>\r\n                            <td>${item.email}</td>\r\n                            <td>${item.phone}</td>\r\n                            <td>${item.address}</td>\r\n                            <td>${statusBadge}</td>\r\n                            <td>\r\n                                <button class=\"btn-sm btn-edit\" data-id=\"${item.id}\"><i class=\"fa-solid fa-pen\"></i></button>\r\n                                <button class=\"btn-sm btn-delete\" data-id=\"${item.id}\"><i class=\"fa-solid fa-trash\"></i></button>\r\n                            </td>\r\n                        </tr>`;\r\n                    });\r\n                } else {\r\n                    rows = '<tr><td colspan=\"8\" style=\"text-align:center\">No suppliers found.</td></tr>';\r\n                }\r\n                $('#suppliers-table-tab tbody').html(rows);\r\n            },\r\n            error: function() {\r\n                $('#suppliers-table-tab tbody').html('<tr><td colspan=\"8\" style=\"text-align:center; color:red;\">Error loading data. Check database connection.</td></tr>');\r\n            }\r\n        });\r\n    }\r\n\r\n    function updateSettingsInfo() {\r\n        $.ajax({\r\n            url: 'api/read.php',\r\n            type: 'GET',\r\n            dataType: 'json',\r\n            success: function(data) {\r\n                $('#db-status-settings').text('Connected').removeClass('badge-danger').addClass('badge-success');\r\n                $('#total-records-settings').text(data.length);\r\n            },\r\n            error: function() {\r\n                $('#db-status-settings').text('Disconnected').removeClass('badge-success').addClass('badge-danger');\r\n                $('#total-records-settings').text('N/A');\r\n            }\r\n        });\r\n    }\r\n\r\n    function showAlert(type, message) {\r\n        var alertBox = $('#alert-message');\r\n        alertBox.removeClass('alert-success alert-error').addClass(type === 'success' ? 'alert-success' : 'alert-error');\r\n        alertBox.text(message).fadeIn();\r\n        setTimeout(function() {\r\n            alertBox.fadeOut();\r\n        }, 3000);\r\n    }\r\n\r\n    // Get status badge color\r\n    function getStatusBadge(status) {\r\n        var badgeClass = 'badge-success';\r\n        if (status === 'Inactive') {\r\n            badgeClass = 'badge-secondary';\r\n        } else if (status === 'Suspended') {\r\n            badgeClass = 'badge-danger';\r\n        }\r\n        return `<span class=\"badge ${badgeClass}\">${status}</span>`;\r\n    }\r\n});\r\n"]}