{"version":3,"sources":["script.js"],"names":["$","document","ready","filterTable","tableId","searchValue","val","toLowerCase","statusValue","css","loadSuppliers","filter","matchesSearch","this","text","indexOf","statusCell","find","rows","matchesStatus","toggle","openSupplierModal","status","reset","getStatusBadge","type","dataType","success","data","length","activeCount","item","loadSuppliersTab","each","i","statusBadge","concat","id","company_name","contact_person","html","updateSettingsInfo","ajax","url","message","email","phone","address","error","showAlert","alertBox","removeClass","addClass","fadeIn","setTimeout","fadeOut","badgeClass","click","e","preventDefault","tab","titles","dashboard","suppliers","settings","hide","window","event","target","submit","JSON","formData","contentType","response","msg","xhr","stringify","responseJSON","on","confirm"],"mappings":"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","file":"script.min.js","sourcesContent":["// Dashboard main script\r\n$(document).ready(function() {\r\n    \r\n    // Load suppliers on page load\r\n    loadSuppliers();\r\n    loadSuppliersTab();\r\n\r\n    // Tab Navigation\r\n    $('.nav-link[data-tab]').click(function(e) {\r\n        e.preventDefault();\r\n        var tab = $(this).data('tab');\r\n        \r\n        // Update active state\r\n        $('.nav-link').removeClass('active');\r\n        $(this).addClass('active');\r\n        \r\n        // Show corresponding tab content\r\n        $('.tab-content').removeClass('active');\r\n        $('#tab-' + tab).addClass('active');\r\n        \r\n        // Update page title\r\n        var titles = {\r\n            'dashboard': 'Dashboard',\r\n            'suppliers': 'Supplier Management',\r\n            'settings': 'System Settings'\r\n        };\r\n        $('#page-title').text(titles[tab] || 'Dashboard');\r\n        \r\n        // Reload data if switching to suppliers tab\r\n        if(tab === 'suppliers') {\r\n            loadSuppliersTab();\r\n        }\r\n        \r\n        // Update settings info if switching to settings\r\n        if(tab === 'settings') {\r\n            updateSettingsInfo();\r\n        }\r\n    });\r\n\r\n    // Open Modal for Adding (Dashboard)\r\n    $('#btn-add-supplier').click(function() {\r\n        openSupplierModal();\r\n    });\r\n\r\n    // Open Modal for Adding (Suppliers Tab)\r\n    $('#btn-add-supplier-tab').click(function() {\r\n        openSupplierModal();\r\n    });\r\n\r\n    // Close Modal\r\n    $('.close-modal, .close-modal-btn').click(function() {\r\n        $('#supplier-modal').hide();\r\n    });\r\n\r\n    // Close modal when clicking outside\r\n    $(window).click(function(event) {\r\n        if (event.target.id == 'supplier-modal') {\r\n            $('#supplier-modal').hide();\r\n        }\r\n    });\r\n\r\n    // Handle Form Submission (Create & Update)\r\n    $('#supplier-form').submit(function(e) {\r\n        e.preventDefault();\r\n        \r\n        // Check if editing or creating\r\n        var id = $('#supplier_id').val();\r\n        var url = id ? 'api/update.php' : 'api/create.php';\r\n        var formData = {\r\n            id: id,\r\n            company_name: $('#company_name').val(),\r\n            contact_person: $('#contact_person').val(),\r\n            email: $('#email').val(),\r\n            phone: $('#phone').val(),\r\n            address: $('#address').val(),\r\n            status: $('#status').val()\r\n        };\r\n\r\n        $.ajax({\r\n            url: url,\r\n            type: 'POST',\r\n            data: JSON.stringify(formData),\r\n            contentType: 'application/json',\r\n            success: function(response) {\r\n                $('#supplier-modal').hide();\r\n                $('#supplier-form')[0].reset();\r\n                showAlert('success', response.message);\r\n                loadSuppliers();\r\n                loadSuppliersTab();\r\n            },\r\n            error: function(xhr, status, error) {\r\n                var msg = xhr.responseJSON ? xhr.responseJSON.message : 'An error occurred';\r\n                showAlert('error', msg);\r\n            }\r\n        });\r\n    });\r\n\r\n    // Handle Edit Button\r\n    $(document).on('click', '.btn-edit', function() {\r\n        var id = $(this).data('id');\r\n        \r\n        $.ajax({\r\n            url: 'api/get_single.php?id=' + id,\r\n            type: 'GET',\r\n            dataType: 'json',\r\n            success: function(data) {\r\n                $('#supplier_id').val(data.id);\r\n                $('#company_name').val(data.company_name);\r\n                $('#contact_person').val(data.contact_person);\r\n                $('#email').val(data.email);\r\n                $('#phone').val(data.phone);\r\n                $('#address').val(data.address);\r\n                $('#status').val(data.status || 'Active');\r\n                \r\n                $('#modal-title').text('Edit Supplier');\r\n                $('#supplier-modal').css('display', 'flex');\r\n            },\r\n            error: function() {\r\n                showAlert('error', 'Could not fetch supplier details.');\r\n            }\r\n        });\r\n    });\r\n\r\n    // Handle Delete Button\r\n    $(document).on('click', '.btn-delete', function() {\r\n        if(confirm('Are you sure you want to delete this supplier?')) {\r\n            var id = $(this).data('id');\r\n            \r\n            $.ajax({\r\n                url: 'api/delete.php',\r\n                type: 'POST',\r\n                data: JSON.stringify({ id: id }),\r\n                contentType: 'application/json',\r\n                success: function(response) {\r\n                    showAlert('success', response.message);\r\n                    loadSuppliers();\r\n                    loadSuppliersTab();\r\n                },\r\n                error: function(xhr) {\r\n                    var msg = xhr.responseJSON ? xhr.responseJSON.message : 'Delete failed';\r\n                    showAlert('error', msg);\r\n                }\r\n            });\r\n        }\r\n    });\r\n\r\n    // Search Functionality\r\n    $('#search-input').on('keyup', function() {\r\n        filterTable('#suppliers-table');\r\n    });\r\n\r\n    // Search Functionality (Suppliers Tab)\r\n    $('#search-input-suppliers').on('keyup', function() {\r\n        filterTable('#suppliers-table-tab');\r\n    });\r\n\r\n    // Status Filter (Dashboard)\r\n    $('#status-filter').on('change', function() {\r\n        filterTable('#suppliers-table');\r\n    });\r\n\r\n    // Status Filter (Suppliers Tab)\r\n    $('#status-filter-suppliers').on('change', function() {\r\n        filterTable('#suppliers-table-tab');\r\n    });\r\n\r\n    // Functions\r\n    // Filter by search and status\r\n    function filterTable(tableId) {\r\n        var searchValue = tableId === '#suppliers-table' ? \r\n            $('#search-input').val().toLowerCase() : \r\n            $('#search-input-suppliers').val().toLowerCase();\r\n        var statusValue = tableId === '#suppliers-table' ? \r\n            $('#status-filter').val() : \r\n            $('#status-filter-suppliers').val();\r\n\r\n        $(tableId + \" tbody tr\").filter(function() {\r\n            var rowText = $(this).text().toLowerCase();\r\n            var matchesSearch = rowText.indexOf(searchValue) > -1;\r\n            var statusCell = $(this).find('td:nth-child(6)').text(); // Status is 6th column in dashboard, 7th in suppliers\r\n            if (tableId === '#suppliers-table-tab') {\r\n                statusCell = $(this).find('td:nth-child(7)').text();\r\n            }\r\n            var matchesStatus = statusValue === '' || statusCell === statusValue;\r\n            $(this).toggle(matchesSearch && matchesStatus);\r\n        });\r\n    }\r\n\r\n    function openSupplierModal() {\r\n        $('#modal-title').text('Add Supplier');\r\n        $('#supplier-form')[0].reset();\r\n        $('#supplier_id').val('');\r\n        $('#status').val('Active'); // Set default status to Active\r\n        $('#supplier-modal').css('display', 'flex');\r\n    }\r\n\r\n    // Load dashboard data\r\n    function loadSuppliers() {\r\n        $.ajax({\r\n            url: 'api/read.php',\r\n            type: 'GET',\r\n            dataType: 'json',\r\n            success: function(data) {\r\n                $('#system-status').text('Online').css('color', 'var(--success-color)');\r\n                var rows = '';\r\n                if(data.length > 0) {\r\n                    $('#total-suppliers').text(data.length);\r\n                    \r\n                    // Count active suppliers\r\n                    var activeCount = data.filter(function(item) {\r\n                        return (item.status || 'Active') === 'Active';\r\n                    }).length;\r\n                    $('#active-suppliers').text(activeCount);\r\n                    \r\n                    $.each(data, function(i, item) {\r\n                        var statusBadge = getStatusBadge(item.status || 'Active');\r\n                        rows += `<tr>\r\n                            <td>${item.id}</td>\r\n                            <td>${item.company_name}</td>\r\n                            <td>${item.contact_person}</td>\r\n                            <td>${item.email}</td>\r\n                            <td>${item.phone}</td>\r\n                            <td>${statusBadge}</td>\r\n                            <td>\r\n                                <button class=\"btn-sm btn-edit\" data-id=\"${item.id}\"><i class=\"fa-solid fa-pen\"></i></button>\r\n                                <button class=\"btn-sm btn-delete\" data-id=\"${item.id}\"><i class=\"fa-solid fa-trash\"></i></button>\r\n                            </td>\r\n                        </tr>`;\r\n                    });\r\n                } else {\r\n                    $('#total-suppliers').text('0');\r\n                    $('#active-suppliers').text('0');\r\n                    rows = '<tr><td colspan=\"7\" style=\"text-align:center\">No suppliers found.</td></tr>';\r\n                }\r\n                $('#suppliers-table tbody').html(rows);\r\n            },\r\n            error: function() {\r\n                $('#system-status').text('Offline').css('color', 'var(--danger-color)');\r\n                $('#suppliers-table tbody').html('<tr><td colspan=\"7\" style=\"text-align:center; color:red;\">Error loading data. Check database connection.</td></tr>');\r\n            }\r\n        });\r\n    }\r\n\r\n    function loadSuppliersTab() {\r\n        $.ajax({\r\n            url: 'api/read.php',\r\n            type: 'GET',\r\n            dataType: 'json',\r\n            success: function(data) {\r\n                var rows = '';\r\n                if(data.length > 0) {\r\n                    $.each(data, function(i, item) {\r\n                        var statusBadge = getStatusBadge(item.status || 'Active');\r\n                        rows += `<tr>\r\n                            <td>${item.id}</td>\r\n                            <td>${item.company_name}</td>\r\n                            <td>${item.contact_person}</td>\r\n                            <td>${item.email}</td>\r\n                            <td>${item.phone}</td>\r\n                            <td>${item.address}</td>\r\n                            <td>${statusBadge}</td>\r\n                            <td>\r\n                                <button class=\"btn-sm btn-edit\" data-id=\"${item.id}\"><i class=\"fa-solid fa-pen\"></i></button>\r\n                                <button class=\"btn-sm btn-delete\" data-id=\"${item.id}\"><i class=\"fa-solid fa-trash\"></i></button>\r\n                            </td>\r\n                        </tr>`;\r\n                    });\r\n                } else {\r\n                    rows = '<tr><td colspan=\"8\" style=\"text-align:center\">No suppliers found.</td></tr>';\r\n                }\r\n                $('#suppliers-table-tab tbody').html(rows);\r\n            },\r\n            error: function() {\r\n                $('#suppliers-table-tab tbody').html('<tr><td colspan=\"8\" style=\"text-align:center; color:red;\">Error loading data. Check database connection.</td></tr>');\r\n            }\r\n        });\r\n    }\r\n\r\n    function updateSettingsInfo() {\r\n        $.ajax({\r\n            url: 'api/read.php',\r\n            type: 'GET',\r\n            dataType: 'json',\r\n            success: function(data) {\r\n                $('#db-status-settings').text('Connected').removeClass('badge-danger').addClass('badge-success');\r\n                $('#total-records-settings').text(data.length);\r\n            },\r\n            error: function() {\r\n                $('#db-status-settings').text('Disconnected').removeClass('badge-success').addClass('badge-danger');\r\n                $('#total-records-settings').text('N/A');\r\n            }\r\n        });\r\n    }\r\n\r\n    function showAlert(type, message) {\r\n        var alertBox = $('#alert-message');\r\n        alertBox.removeClass('alert-success alert-error').addClass(type === 'success' ? 'alert-success' : 'alert-error');\r\n        alertBox.text(message).fadeIn();\r\n        setTimeout(function() {\r\n            alertBox.fadeOut();\r\n        }, 3000);\r\n    }\r\n\r\n    // Get status badge color\r\n    function getStatusBadge(status) {\r\n        var badgeClass = 'badge-success';\r\n        if (status === 'Inactive') {\r\n            badgeClass = 'badge-secondary';\r\n        } else if (status === 'Suspended') {\r\n            badgeClass = 'badge-danger';\r\n        }\r\n        return `<span class=\"badge ${badgeClass}\">${status}</span>`;\r\n    }\r\n});\r\n"]}