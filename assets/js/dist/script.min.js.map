{"version":3,"sources":["script.js"],"names":["$","document","ready","filterTable","tableId","searchValue","val","toLowerCase","statusValue","css","ajax","filter","matchesSearch","this","text","indexOf","statusCell","find","matchesStatus","data","length","openSupplierModal","reset","statusBadge","rows","loadSuppliers","type","dataType","success","activeCount","item","status","loadSuppliersTab","each","i","getStatusBadge","concat","id","company_name","contact_person","html","updateSettingsInfo","url","message","email","phone","address","badgeClass","error","showAlert","alertBox","removeClass","addClass","fadeIn","setTimeout","fadeOut","click","e","preventDefault","tab","titles","dashboard","suppliers","settings","hide","window","event","target","formData","submit","JSON","contentType","response","msg","xhr","stringify","responseJSON","on","confirm"],"mappings":"aAAAA,EAAEC,UAAUC,MAAM,WA2LVF,SAAEG,EAAFC,GACE,IAAAC,EAAF,qBAAsBD,EACpBJ,EAAA,iBAJuBM,MAIGC,cArBxBP,EAAE,2BAA2BM,MAAMC,cAsBrCC,EAAF,qBAAqBC,EACxBT,EAAA,kBAAAM,MApBON,EAAE,4BAA4BM,MAuBhCI,EAAFN,EAAO,aAAAO,OAAA,WACE,IACCC,GAFH,EAAAZ,EAAAa,MAAAC,OAAAP,cAAAQ,QAAAV,GAGOW,EAHPhB,EAAAa,MAAAI,KAAA,mBAAAH,OAIM,yBAAAV,IACHY,EAAkBF,EAAAA,MAAKG,KAAzB,mBAAgDH,QAnBpD,IAAII,EAAgC,KAAhBV,GAAsBQ,IAAeR,EAqBlDW,EAAAA,MAAKC,OAARR,GAAoBM,KAKZ,SAAAG,IACHrB,EAAA,gBAFDc,KAAA,gBAGAd,EAAAA,kBAAE,GAADsB,QAEDtB,EAAAA,gBAAaM,IAAA,IACTN,EAAA,WAAIuB,IAAAA,UACJC,EAAAA,mBAAIf,IAAA,UAAA,QAcRT,SAAEyB,IACFzB,EAAAA,KAAE,CACFwB,IAAO,eACVE,KAAA,MAhCLC,SAAU,OAiCJC,QAAA,SAAAT,GApCHnB,EAAA,kBAAAc,KAAA,UAAAL,IAAA,QAAA,wBAsCI,IAAAe,EAAA,GACD,GAAuB,EAAvBL,EAAAC,OAAuB,CACvBpB,EAAA,oBAA+Bc,KAAAK,EAAAC,QAG5C,IAAAS,EAAAV,EAAAR,OAAA,SAAAmB,GA/BmB,MAAqC,YAA7BA,EAAKC,QAAU,YAiClCC,OACEhC,EAAA,qBAAAc,KAAAe,GAAA7B,EAAAiC,KAAAd,EAAA,SAAAe,EAAAJ,GAAA,IAAAP,EAAAY,EAAAL,EAAAC,QAAA,UAIMP,GAAA,yCAAAY,OACLN,EAAAO,GADK,2CAAAD,OA9BaN,EAAKQ,aA8BlB,2CAAAF,OAEeN,EAAAS,eAFf,2CAAAH,OAGYN,EAAYA,MAHxB,2CAAAM,OAIqBD,EAAAA,MAJrB,2CAAAC,OAKOb,EALP,sHAAAa,OAmBEN,EAAAO,GAnBF,2HAAAD,OAoBMN,EAAAO,GApBN,yHAwBFrC,EAAA,oBAAWc,KAAA,KACZd,EAAA,qBAA8BwC,KAAK,KACxChB,EAAA,8EAERxB,EAAA,0BAAAwC,KAAAhB,IAEQiB,MAAAA,WACEzC,EAAA,kBAAAc,KAAA,WAAAL,IAAA,QAAA,uBACET,EAAA,0BADFwC,KAAA,yHAMCxC,SAAEgC,IANHhC,EAAAU,KAAA,CAQEgC,IAAE,eACDhB,KAAA,MACAC,SAAA,OACLC,QAAA,SAAAT,GAXL,IAAAK,EAAA,GAaH,EAAAL,EAAAC,OAzCepB,EAAEiC,KAAKd,EAAM,SAASe,EAAGJ,GA2CtBJ,IAAMiB,EAASR,EAAAL,EAAAC,QAAA,UACbP,GAAA,yCAAAY,OACIN,EAAAO,GADJ,2CAAAD,OAEjBN,EAAAQ,aAFiB,2CAAAF,OAGKN,EAAAS,eAHL,2CAAAH,OAIbN,EAAAc,MAJa,2CAAAR,OAGjBN,EAAAe,MAHiB,2CAAAT,OAMpBN,EAAAgB,QANoB,2CAAAV,OAnCSb,EAmCT,sHAAAa,OASjBN,EAAAO,GATiB,2HAAAD,OAhCoDN,EAAKO,GAgCzD,oHAchBb,EAAA,8EACDxB,EAAA,8BAA6B+C,KAA7BvB,IAlTRwB,MAAA,WA6QgBhD,EAAE,8BAA8BwC,KAAK,yHAqBjD,SAASS,EAAUvB,EAAMiB,GACrB,IAAIO,EAAWlD,EAAE,kBACjBkD,EAASC,YAAY,6BAA6BC,SAAkB,YAAT1B,EAAqB,gBAAkB,eAClGwB,EAASpC,KAAK6B,GAASU,SACvBC,WAAW,WACPJ,EAASK,WACV,KAGP,SAASpB,EAAeJ,GACpB,IAAIgB,EAAa,gBAMjB,MALe,aAAXhB,EACAgB,EAAa,kBACK,cAAXhB,IACPgB,EAAa,gBAEjB,sBAAAX,OAA6BW,EAA7B,MAAAX,OAA4CL,EAA5C,WAhTJN,IACAA,IAIEzB,EAAA,uBAAuBwD,MAAM,SAAAC,GACzBC,EAAAA,iBACEC,IAAGA,EAAK3D,EAADa,MAADM,KAAa,OAIrBnB,EAAD,aAAgBmD,YAEjB,UAFAnD,EAAEa,MAAMuC,SAAS,UAGjBpD,EAAE,gBAAgBmD,YAAY,UAI1BS,EAAAA,QAASD,GAAAP,SAAA,UASTpB,EAAAA,eAAgBlB,KANJ,CAHhB+C,UAAA,YAKEC,UAAF,sBAFIC,SAAY,mBAMIJ,IAAA,aADT,cAARA,GAKG3B,IAAK,aAAR2B,GAkPH3D,EAAEU,KAAK,CACHgC,IAAK,eACLhB,KAAM,MACNC,SAAU,OACVC,QAAS,SAAST,GACdnB,EAAE,uBAAuBc,KAAK,aAAaqC,YAAY,gBAAgBC,SAAS,iBAChFpD,EAAE,2BAA2Bc,KAAKK,EAAKC,SAE3C4B,MAAO,WACHhD,EAAE,uBAAuBc,KAAK,gBAAgBqC,YAAY,iBAAiBC,SAAS,gBACpFpD,EAAE,2BAA2Bc,KAAK,YAhP1CO,EAAAA,qBAAiBmC,MAAA,WAGrBnC,MACArB,EAIA,yBAAAwD,MAAA,WARInC,MAYCrB,EAAA,kCAAAwD,MAAA,WAGLxD,EAAA,mBAAAgE,SAIIhE,EAAAiE,QAAUT,MAAC,SAADU,GACK,kBAARA,EAAKC,OAAG9B,IACX+B,EAAAA,mBAAWJ,SAKXnB,EAAAA,kBAAOwB,OALI,SAAAZ,GAMXX,EAAAA,iBANJ,IAAAT,EAAArC,EAAA,gBAAAM,MAUOoC,EAAAL,EAAA,iBAAA,iBACEK,EADF,CAEGL,GAAAA,EACAiC,aAAAtE,EAAeoE,iBAHlB9D,MAIHiE,eAAavE,EAAA,mBAJVM,MAKHsB,MAAS5B,EAAA,UAAAM,MACHuC,MAAA7C,EAAA,UAAmBgE,MACnBlB,QAAA9C,EAAA,YAAqBsB,MACvB2B,OAAUjD,EAAA,WAAWwE,OARtBxE,EAAAU,KAAA,CAYEgC,IAAEA,EACC+B,KAAMC,OACVzB,KAAUqB,KAAAK,UAAVP,GACHG,YAAA,mBAfL3C,QAAA,SAAA4C,GAmBJxE,EAAA,mBAAAgE,OAZYhE,EAAE,kBAAkB,GAAGsB,QAanC2B,EAAwB,UAAxBuB,EAAqC7B,SACtBlB,IAEJO,KAEGgB,MAFH,SAAA0B,GAIMzB,EAAA,QAJNyB,EAAAE,aAAAF,EAAAE,aAAAjC,QAAA,0BAUC3C,EAAAA,UAAE6E,GAAA,QAAgB1D,YAAlB,WACAnB,IAAEqC,EAAArC,EAADa,MAAgBM,KAAKY,MAGtB/B,EAAEU,KAAA,CAdHgC,IAAA,yBAAAL,EAgBEX,KAAE,MACHuB,SAAU,OACbrB,QAAA,SAAAT,GAlBLnB,EAAA,gBAAAM,IAAAa,EAAAkB,IAsBJrC,EAAA,iBAAAM,IAAAa,EAAAmB,cAfYtC,EAAE,mBAAmBM,IAAIa,EAAKoB,gBAgB1CvC,EAAe,UAASM,IAAAa,EAAAyB,OACT5C,EAAA,UAAAM,IAAAa,EAAA0B,OACG7C,EAAC,YAAWM,IAAtBa,EAAA2B,SAEO9C,EAAA,WAAAM,IAAAa,EAAAY,QAAA,UAEG/B,EAAA,gBAFHc,KAAA,iBAGGwD,EAAI,mBAAW7D,IAAA,UAAA,SAHlBuC,MAAA,WAIHuB,EAAa,QAAA,0CAMbvB,EAAAA,UAAO6B,GAAA,QAAA,cAAc,WACjB,GAAAC,QAAO,kDAAiD,CACxD7B,IAAAA,EAAUjD,EAAAa,MAAS4D,KAAnB,MAZRzE,EAAAU,KAAA,CAeHgC,IAAA,iBAGLhB,KAAA,OAfYP,KAAMmD,KAAKK,UAAU,CAAEtC,GAAIA,IAgBrCkC,YAAoB,mBACN3C,QAAA,SAAD4C,GAGfvB,EAAA,UAAAuB,EAAA7B,SAhBgBlB,IAiBdO,KAIFgB,MAAA,SAAA0B,GACCzB,EAAsB,QAlBGyB,EAAIE,aAAeF,EAAIE,aAAajC,QAAU,uBAQxE3C,EAAE,iBAAiB6E,GAAG,QAAS,WAoB/B1E,EAASA,sBASDH,EAAA,2BAAc6E,GAAetE,QAAAA,WAC7BJ,EAAIS,0BAGAI,EAAAA,kBAAe6D,GAAD,SAAY,WAC7B1E,EAAA,sBAGJH,EATD,4BAAA6E,GAAA,SAAA,WAUH1E,EAAA","file":"script.min.js","sourcesContent":["$(document).ready(function() {\r\n    \r\n    // Load suppliers on page load\r\n    loadSuppliers();\r\n    loadSuppliersTab();\r\n\r\n    // Tab Navigation\r\n    $('.nav-link[data-tab]').click(function(e) {\r\n        e.preventDefault();\r\n        var tab = $(this).data('tab');\r\n        \r\n        // Update active state\r\n        $('.nav-link').removeClass('active');\r\n        $(this).addClass('active');\r\n        \r\n        // Show corresponding tab content\r\n        $('.tab-content').removeClass('active');\r\n        $('#tab-' + tab).addClass('active');\r\n        \r\n        // Update page title\r\n        var titles = {\r\n            'dashboard': 'Dashboard',\r\n            'suppliers': 'Supplier Management',\r\n            'settings': 'System Settings'\r\n        };\r\n        $('#page-title').text(titles[tab] || 'Dashboard');\r\n        \r\n        // Reload data if switching to suppliers tab\r\n        if(tab === 'suppliers') {\r\n            loadSuppliersTab();\r\n        }\r\n        \r\n        // Update settings info if switching to settings\r\n        if(tab === 'settings') {\r\n            updateSettingsInfo();\r\n        }\r\n    });\r\n\r\n    // Open Modal for Adding (Dashboard)\r\n    $('#btn-add-supplier').click(function() {\r\n        openSupplierModal();\r\n    });\r\n\r\n    // Open Modal for Adding (Suppliers Tab)\r\n    $('#btn-add-supplier-tab').click(function() {\r\n        openSupplierModal();\r\n    });\r\n\r\n    // Close Modal\r\n    $('.close-modal, .close-modal-btn').click(function() {\r\n        $('#supplier-modal').hide();\r\n    });\r\n\r\n    // Close modal when clicking outside\r\n    $(window).click(function(event) {\r\n        if (event.target.id == 'supplier-modal') {\r\n            $('#supplier-modal').hide();\r\n        }\r\n    });\r\n\r\n    // Handle Form Submission (Create & Update)\r\n    $('#supplier-form').submit(function(e) {\r\n        e.preventDefault();\r\n        \r\n        var id = $('#supplier_id').val();\r\n        var url = id ? 'api/update.php' : 'api/create.php';\r\n        var formData = {\r\n            id: id,\r\n            company_name: $('#company_name').val(),\r\n            contact_person: $('#contact_person').val(),\r\n            email: $('#email').val(),\r\n            phone: $('#phone').val(),\r\n            address: $('#address').val(),\r\n            status: $('#status').val()\r\n        };\r\n\r\n        $.ajax({\r\n            url: url,\r\n            type: 'POST',\r\n            data: JSON.stringify(formData),\r\n            contentType: 'application/json',\r\n            success: function(response) {\r\n                $('#supplier-modal').hide();\r\n                $('#supplier-form')[0].reset();\r\n                showAlert('success', response.message);\r\n                loadSuppliers();\r\n                loadSuppliersTab();\r\n            },\r\n            error: function(xhr, status, error) {\r\n                var msg = xhr.responseJSON ? xhr.responseJSON.message : 'An error occurred';\r\n                showAlert('error', msg);\r\n            }\r\n        });\r\n    });\r\n\r\n    // Handle Edit Button\r\n    $(document).on('click', '.btn-edit', function() {\r\n        var id = $(this).data('id');\r\n        \r\n        $.ajax({\r\n            url: 'api/get_single.php?id=' + id,\r\n            type: 'GET',\r\n            dataType: 'json',\r\n            success: function(data) {\r\n                $('#supplier_id').val(data.id);\r\n                $('#company_name').val(data.company_name);\r\n                $('#contact_person').val(data.contact_person);\r\n                $('#email').val(data.email);\r\n                $('#phone').val(data.phone);\r\n                $('#address').val(data.address);\r\n                $('#status').val(data.status || 'Active');\r\n                \r\n                $('#modal-title').text('Edit Supplier');\r\n                $('#supplier-modal').css('display', 'flex');\r\n            },\r\n            error: function() {\r\n                showAlert('error', 'Could not fetch supplier details.');\r\n            }\r\n        });\r\n    });\r\n\r\n    // Handle Delete Button\r\n    $(document).on('click', '.btn-delete', function() {\r\n        if(confirm('Are you sure you want to delete this supplier?')) {\r\n            var id = $(this).data('id');\r\n            \r\n            $.ajax({\r\n                url: 'api/delete.php',\r\n                type: 'POST',\r\n                data: JSON.stringify({ id: id }),\r\n                contentType: 'application/json',\r\n                success: function(response) {\r\n                    showAlert('success', response.message);\r\n                    loadSuppliers();\r\n                    loadSuppliersTab();\r\n                },\r\n                error: function(xhr) {\r\n                    var msg = xhr.responseJSON ? xhr.responseJSON.message : 'Delete failed';\r\n                    showAlert('error', msg);\r\n                }\r\n            });\r\n        }\r\n    });\r\n\r\n    // Search Functionality\r\n    $('#search-input').on('keyup', function() {\r\n        filterTable('#suppliers-table');\r\n    });\r\n\r\n    // Search Functionality (Suppliers Tab)\r\n    $('#search-input-suppliers').on('keyup', function() {\r\n        filterTable('#suppliers-table-tab');\r\n    });\r\n\r\n    // Status Filter (Dashboard)\r\n    $('#status-filter').on('change', function() {\r\n        filterTable('#suppliers-table');\r\n    });\r\n\r\n    // Status Filter (Suppliers Tab)\r\n    $('#status-filter-suppliers').on('change', function() {\r\n        filterTable('#suppliers-table-tab');\r\n    });\r\n\r\n    // Functions\r\n    function filterTable(tableId) {\r\n        var searchValue = tableId === '#suppliers-table' ? \r\n            $('#search-input').val().toLowerCase() : \r\n            $('#search-input-suppliers').val().toLowerCase();\r\n        var statusValue = tableId === '#suppliers-table' ? \r\n            $('#status-filter').val() : \r\n            $('#status-filter-suppliers').val();\r\n\r\n        $(tableId + \" tbody tr\").filter(function() {\r\n            var rowText = $(this).text().toLowerCase();\r\n            var matchesSearch = rowText.indexOf(searchValue) > -1;\r\n            var statusCell = $(this).find('td:nth-child(6)').text(); // Status is 6th column in dashboard, 7th in suppliers\r\n            if (tableId === '#suppliers-table-tab') {\r\n                statusCell = $(this).find('td:nth-child(7)').text();\r\n            }\r\n            var matchesStatus = statusValue === '' || statusCell === statusValue;\r\n            $(this).toggle(matchesSearch && matchesStatus);\r\n        });\r\n    }\r\n\r\n    function openSupplierModal() {\r\n        $('#modal-title').text('Add Supplier');\r\n        $('#supplier-form')[0].reset();\r\n        $('#supplier_id').val('');\r\n        $('#status').val('Active'); // Set default status to Active\r\n        $('#supplier-modal').css('display', 'flex');\r\n    }\r\n\r\n    function loadSuppliers() {\r\n        $.ajax({\r\n            url: 'api/read.php',\r\n            type: 'GET',\r\n            dataType: 'json',\r\n            success: function(data) {\r\n                $('#system-status').text('Online').css('color', 'var(--success-color)');\r\n                var rows = '';\r\n                if(data.length > 0) {\r\n                    $('#total-suppliers').text(data.length);\r\n                    \r\n                    // Count active suppliers\r\n                    var activeCount = data.filter(function(item) {\r\n                        return (item.status || 'Active') === 'Active';\r\n                    }).length;\r\n                    $('#active-suppliers').text(activeCount);\r\n                    \r\n                    $.each(data, function(i, item) {\r\n                        var statusBadge = getStatusBadge(item.status || 'Active');\r\n                        rows += `<tr>\r\n                            <td>${item.id}</td>\r\n                            <td>${item.company_name}</td>\r\n                            <td>${item.contact_person}</td>\r\n                            <td>${item.email}</td>\r\n                            <td>${item.phone}</td>\r\n                            <td>${statusBadge}</td>\r\n                            <td>\r\n                                <button class=\"btn-sm btn-edit\" data-id=\"${item.id}\"><i class=\"fa-solid fa-pen\"></i></button>\r\n                                <button class=\"btn-sm btn-delete\" data-id=\"${item.id}\"><i class=\"fa-solid fa-trash\"></i></button>\r\n                            </td>\r\n                        </tr>`;\r\n                    });\r\n                } else {\r\n                    $('#total-suppliers').text('0');\r\n                    $('#active-suppliers').text('0');\r\n                    rows = '<tr><td colspan=\"7\" style=\"text-align:center\">No suppliers found.</td></tr>';\r\n                }\r\n                $('#suppliers-table tbody').html(rows);\r\n            },\r\n            error: function() {\r\n                $('#system-status').text('Offline').css('color', 'var(--danger-color)');\r\n                $('#suppliers-table tbody').html('<tr><td colspan=\"7\" style=\"text-align:center; color:red;\">Error loading data. Check database connection.</td></tr>');\r\n            }\r\n        });\r\n    }\r\n\r\n    function loadSuppliersTab() {\r\n        $.ajax({\r\n            url: 'api/read.php',\r\n            type: 'GET',\r\n            dataType: 'json',\r\n            success: function(data) {\r\n                var rows = '';\r\n                if(data.length > 0) {\r\n                    $.each(data, function(i, item) {\r\n                        var statusBadge = getStatusBadge(item.status || 'Active');\r\n                        rows += `<tr>\r\n                            <td>${item.id}</td>\r\n                            <td>${item.company_name}</td>\r\n                            <td>${item.contact_person}</td>\r\n                            <td>${item.email}</td>\r\n                            <td>${item.phone}</td>\r\n                            <td>${item.address}</td>\r\n                            <td>${statusBadge}</td>\r\n                            <td>\r\n                                <button class=\"btn-sm btn-edit\" data-id=\"${item.id}\"><i class=\"fa-solid fa-pen\"></i></button>\r\n                                <button class=\"btn-sm btn-delete\" data-id=\"${item.id}\"><i class=\"fa-solid fa-trash\"></i></button>\r\n                            </td>\r\n                        </tr>`;\r\n                    });\r\n                } else {\r\n                    rows = '<tr><td colspan=\"8\" style=\"text-align:center\">No suppliers found.</td></tr>';\r\n                }\r\n                $('#suppliers-table-tab tbody').html(rows);\r\n            },\r\n            error: function() {\r\n                $('#suppliers-table-tab tbody').html('<tr><td colspan=\"8\" style=\"text-align:center; color:red;\">Error loading data. Check database connection.</td></tr>');\r\n            }\r\n        });\r\n    }\r\n\r\n    function updateSettingsInfo() {\r\n        $.ajax({\r\n            url: 'api/read.php',\r\n            type: 'GET',\r\n            dataType: 'json',\r\n            success: function(data) {\r\n                $('#db-status-settings').text('Connected').removeClass('badge-danger').addClass('badge-success');\r\n                $('#total-records-settings').text(data.length);\r\n            },\r\n            error: function() {\r\n                $('#db-status-settings').text('Disconnected').removeClass('badge-success').addClass('badge-danger');\r\n                $('#total-records-settings').text('N/A');\r\n            }\r\n        });\r\n    }\r\n\r\n    function showAlert(type, message) {\r\n        var alertBox = $('#alert-message');\r\n        alertBox.removeClass('alert-success alert-error').addClass(type === 'success' ? 'alert-success' : 'alert-error');\r\n        alertBox.text(message).fadeIn();\r\n        setTimeout(function() {\r\n            alertBox.fadeOut();\r\n        }, 3000);\r\n    }\r\n\r\n    function getStatusBadge(status) {\r\n        var badgeClass = 'badge-success';\r\n        if (status === 'Inactive') {\r\n            badgeClass = 'badge-secondary';\r\n        } else if (status === 'Suspended') {\r\n            badgeClass = 'badge-danger';\r\n        }\r\n        return `<span class=\"badge ${badgeClass}\">${status}</span>`;\r\n    }\r\n});\r\n"]}